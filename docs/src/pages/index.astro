---
import Layout from "../layouts/Layout.astro";
---

<Layout title="个人 Dotfiles 配置">
    <!-- Hero 区域 -->
    <section
        class="bg-gradient-to-br from-primary-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 py-20"
    >
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1
                class="text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6"
            >
                <span class="text-5xl md:text-7xl">🏠</span>
                <br />
                个人 Dotfiles 配置
            </h1>
            <p
                class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-8 max-w-3xl mx-auto"
            >
                基于 Chezmoi + Mise + Zim 的多平台配置管理方案，支持 macOS 和
                Linux
            </p>

            <!-- 一键安装区域 -->
            <div
                class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 max-w-2xl mx-auto"
            >
                <h2
                    class="text-2xl font-bold mb-6 text-gray-900 dark:text-white"
                >
                    🚀 一键安装
                </h2>

                <!-- Tab 切换 -->
                <div
                    class="relative bg-gray-100 dark:bg-gray-700 rounded-lg p-1 mb-6"
                >
                    <div class="flex">
                        <button
                            id="tab-curl"
                            class="tab-btn flex-1 relative z-10 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 bg-white dark:bg-gray-600 text-primary-600 dark:text-primary-400 shadow-sm"
                            data-tab="curl"
                        >
                            <span class="flex items-center justify-center">
                                📥 Curl
                            </span>
                        </button>
                        <button
                            id="tab-wget"
                            class="tab-btn flex-1 relative z-10 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"
                            data-tab="wget"
                        >
                            <span class="flex items-center justify-center">
                                ⬇️ Wget
                            </span>
                        </button>
                    </div>
                </div>

                <!-- 命令显示区域 -->
                <div class="command-container">
                    <!-- Curl 命令 -->
                    <div id="command-curl" class="command-content">
                        <div class="flex items-center justify-between mb-2">
                            <label
                                class="text-sm font-medium text-gray-700 dark:text-gray-300"
                                >使用 Curl 安装</label
                            >
                            <button
                                class="copy-btn text-sm bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded-md transition-colors"
                                data-command="curl"
                            >
                                📋 复制
                            </button>
                        </div>
                        <div
                            class="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm break-all"
                        >
                            curl -fsSL https://chezmoi.keveon.io/install.sh |
                            bash
                        </div>
                    </div>

                    <!-- Wget 命令 -->
                    <div id="command-wget" class="command-content hidden">
                        <div class="flex items-center justify-between mb-2">
                            <label
                                class="text-sm font-medium text-gray-700 dark:text-gray-300"
                                >使用 Wget 安装</label
                            >
                            <button
                                class="copy-btn text-sm bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded-md transition-colors"
                                data-command="wget"
                            >
                                📋 复制
                            </button>
                        </div>
                        <div
                            class="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm break-all"
                        >
                            wget -qO- https://chezmoi.keveon.io/install.sh |
                            bash
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 特性展示 -->
    <section class="py-20 bg-white dark:bg-gray-900">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2
                class="text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white"
            >
                ✨ 核心特性
            </h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div
                    class="text-center p-6 rounded-lg bg-gray-50 dark:bg-gray-800"
                >
                    <div class="text-4xl mb-4">🍎🐧</div>
                    <h3
                        class="text-xl font-bold mb-3 text-gray-900 dark:text-white"
                    >
                        多平台支持
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        完美支持 macOS 和
                        Linux，自动检测平台并适配不同的包管理器
                    </p>
                </div>
                <div
                    class="text-center p-6 rounded-lg bg-gray-50 dark:bg-gray-800"
                >
                    <div class="text-4xl mb-4">⚡</div>
                    <h3
                        class="text-xl font-bold mb-3 text-gray-900 dark:text-white"
                    >
                        自动化配置
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        一键安装开发环境，包括系统依赖、Shell 配置、开发工具等
                    </p>
                </div>
                <div
                    class="text-center p-6 rounded-lg bg-gray-50 dark:bg-gray-800"
                >
                    <div class="text-4xl mb-4">🛠️</div>
                    <h3
                        class="text-xl font-bold mb-3 text-gray-900 dark:text-white"
                    >
                        工具集成
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        集成 Chezmoi、Mise、Zim 框架，支持 Go、Rust、Node.js
                        等开发环境
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- 安装指南 -->
    <section class="py-20 bg-gray-50 dark:bg-gray-800">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2
                class="text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white"
            >
                📦 安装指南
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md">
                    <h3
                        class="text-xl font-bold mb-4 text-primary-600 dark:text-primary-400"
                    >
                        快速安装
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">
                        推荐使用一键安装脚本，自动检测操作系统并安装所有依赖：
                    </p>
                    <ol
                        class="list-decimal list-inside space-y-2 text-gray-600 dark:text-gray-300"
                    >
                        <li>选择上方安装命令（Curl 或 Wget）</li>
                        <li>复制并粘贴到终端运行</li>
                        <li>等待安装完成，重启终端</li>
                    </ol>
                </div>
                <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md">
                    <h3
                        class="text-xl font-bold mb-4 text-primary-600 dark:text-primary-400"
                    >
                        手动安装
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">
                        如需手动安装或了解详细步骤：
                    </p>
                    <ol
                        class="list-decimal list-inside space-y-2 text-gray-600 dark:text-gray-300"
                    >
                        <li>
                            安装 Mise: <code
                                class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"
                                >curl https://mise.run | sh</code
                            >
                        </li>
                        <li>
                            安装 Chezmoi: <code
                                class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"
                                >mise use -g chezmoi</code
                            >
                        </li>
                        <li>
                            初始化配置: <code
                                class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"
                                >chezmoi init keveon/chezmoi-starter</code
                            >
                        </li>
                        <li>
                            应用配置: <code
                                class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"
                                >chezmoi apply</code
                            >
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- 常用命令 -->
    <section class="py-20 bg-white dark:bg-gray-900">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2
                class="text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white"
            >
                🔧 常用命令
            </h2>

            <!-- Mise 高级功能展示 -->
            <div class="mb-16">
                <div class="text-center mb-8">
                    <h3
                        class="text-2xl font-bold text-primary-600 dark:text-primary-400 mb-4"
                    >
                        ⚡ Mise - 强大的开发环境管理器
                    </h3>
                    <p
                        class="text-gray-600 dark:text-gray-300 max-w-3xl mx-auto"
                    >
                        Mise
                        不仅仅是版本管理器，它还提供任务自动化、环境变量管理、项目级配置等强大功能
                    </p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div
                        class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 p-6 rounded-lg"
                    >
                        <h4
                            class="font-bold text-lg mb-3 text-blue-900 dark:text-blue-100"
                        >
                            🔧 工具管理
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white dark:bg-blue-900 p-3 rounded">
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise install</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise install">📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    安装所有配置工具
                                </p>
                            </div>
                            <div class="bg-white dark:bg-blue-900 p-3 rounded">
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise ls-remote node</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise ls-remote node"
                                        >📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    查看可用版本
                                </p>
                            </div>
                            <div class="bg-white dark:bg-blue-900 p-3 rounded">
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise exec node@18 -- node --version</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise exec node@18 -- node --version"
                                        >📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    特定版本执行
                                </p>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900 dark:to-green-800 p-6 rounded-lg"
                    >
                        <h4
                            class="font-bold text-lg mb-3 text-green-900 dark:text-green-100"
                        >
                            🚀 任务系统
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white dark:bg-green-900 p-3 rounded">
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise tasks</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise tasks">📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    查看所有任务
                                </p>
                            </div>
                            <div class="bg-white dark:bg-green-900 p-3 rounded">
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise run go:setup</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise run go:setup"
                                        >📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    Go 环境配置
                                </p>
                            </div>
                            <div class="bg-white dark:bg-green-900 p-3 rounded">
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise run rust:setup</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise run rust:setup"
                                        >📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    Rust 环境配置
                                </p>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900 dark:to-purple-800 p-6 rounded-lg"
                    >
                        <h4
                            class="font-bold text-lg mb-3 text-purple-900 dark:text-purple-100"
                        >
                            🌍 环境管理
                        </h4>
                        <div class="space-y-3">
                            <div
                                class="bg-white dark:bg-purple-900 p-3 rounded"
                            >
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise use node@18</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise use node@18"
                                        >📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    项目级工具设置
                                </p>
                            </div>
                            <div
                                class="bg-white dark:bg-purple-900 p-3 rounded"
                            >
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise set EDITOR=nvim</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise set EDITOR=nvim"
                                        >📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    环境变量设置
                                </p>
                            </div>
                            <div
                                class="bg-white dark:bg-purple-900 p-3 rounded"
                            >
                                <div
                                    class="flex justify-between items-center mb-1"
                                >
                                    <code class="font-mono text-xs"
                                        >mise doctor</code
                                    >
                                    <button
                                        class="copy-btn text-xs bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 rounded transition-colors"
                                        data-command="mise doctor">📋</button
                                    >
                                </div>
                                <p
                                    class="text-xs text-gray-600 dark:text-gray-400"
                                >
                                    系统诊断
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3
                        class="text-xl font-bold mb-6 text-primary-600 dark:text-primary-400"
                    >
                        🏠 Chezmoi 配置管理
                    </h3>
                    <div class="space-y-4">
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm"
                                    >chezmoi apply</code
                                >
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="chezmoi apply">📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                应用所有配置文件
                            </p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm"
                                    >chezmoi status</code
                                >
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="chezmoi status">📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                查看配置状态
                            </p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm"
                                    >chezmoi apply --dry-run</code
                                >
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="chezmoi apply --dry-run"
                                    >📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                预览将要应用的更改
                            </p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm"
                                    >chezmoi update</code
                                >
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="chezmoi update">📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                拉取并应用最新配置
                            </p>
                        </div>
                    </div>
                </div>
                <div>
                    <h3
                        class="text-xl font-bold mb-6 text-primary-600 dark:text-primary-400"
                    >
                        🔄 同步与维护
                    </h3>
                    <div class="space-y-4">
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm"
                                    >mise run dotfiles:sync</code
                                >
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="mise run dotfiles:sync"
                                    >📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                同步 dotfiles 配置
                            </p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm"
                                    >zimfw update</code
                                >
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="zimfw update">📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                更新 Zim 框架
                            </p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm">mise up</code>
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="mise up">📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                更新开发工具版本
                            </p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <code class="font-mono text-sm"
                                    >chezmoi archive --output=backup.tar.gz</code
                                >
                                <button
                                    class="copy-btn text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded transition-colors"
                                    data-command="chezmoi archive --output=backup.tar.gz"
                                    >📋</button
                                >
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                备份当前配置
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 工具列表 -->
    <section class="py-20 bg-gray-50 dark:bg-gray-800">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2
                class="text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white"
            >
                🛠️ 包含工具
            </h2>
            <div
                class="bg-white dark:bg-gray-900 rounded-lg shadow-lg overflow-hidden"
            >
                <table class="w-full">
                    <thead class="bg-gray-100 dark:bg-gray-800">
                        <tr>
                            <th
                                class="px-6 py-4 text-left text-sm font-medium text-gray-700 dark:text-gray-300"
                                >类型</th
                            >
                            <th
                                class="px-6 py-4 text-left text-sm font-medium text-gray-700 dark:text-gray-300"
                                >macOS</th
                            >
                            <th
                                class="px-6 py-4 text-left text-sm font-medium text-gray-700 dark:text-gray-300"
                                >Linux</th
                            >
                        </tr>
                    </thead>
                    <tbody
                        class="divide-y divide-gray-200 dark:divide-gray-700"
                    >
                        <tr>
                            <td
                                class="px-6 py-4 font-medium text-gray-900 dark:text-white"
                                >核心工具</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >chezmoi, usage</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >chezmoi, usage</td
                            >
                        </tr>
                        <tr class="bg-gray-50 dark:bg-gray-800">
                            <td
                                class="px-6 py-4 font-medium text-gray-900 dark:text-white"
                                >CLI 工具</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >-</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >bat, eza, fd, fzf, rg, starship, zoxide</td
                            >
                        </tr>
                        <tr>
                            <td
                                class="px-6 py-4 font-medium text-gray-900 dark:text-white"
                                >编辑器</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >-</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >neovim</td
                            >
                        </tr>
                        <tr class="bg-gray-50 dark:bg-gray-800">
                            <td
                                class="px-6 py-4 font-medium text-gray-900 dark:text-white"
                                >开发环境</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >通过 Mise 管理</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                >通过 Mise 管理</td
                            >
                        </tr>
                        <tr>
                            <td
                                class="px-6 py-4 font-medium text-gray-900 dark:text-white"
                                >可选工具</td
                            >
                            <td
                                class="px-6 py-4 text-gray-600 dark:text-gray-300"
                                colspan="2"
                                >python, cargo:erdtree, cargo:tree-sitter-cli
                                (已注释)</td
                            >
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Tab 切换功能
            const tabBtns = document.querySelectorAll(".tab-btn");
            const commandContents =
                document.querySelectorAll(".command-content");

            tabBtns.forEach((btn) => {
                btn.addEventListener("click", () => {
                    const tabName = btn.dataset.tab;

                    // 更新按钮样式
                    tabBtns.forEach((b) => {
                        b.classList.remove(
                            "bg-white",
                            "dark:bg-gray-600",
                            "text-primary-600",
                            "dark:text-primary-400",
                            "shadow-sm",
                        );
                        b.classList.add(
                            "text-gray-600",
                            "dark:text-gray-400",
                            "hover:text-gray-900",
                            "dark:hover:text-gray-100",
                        );
                    });

                    btn.classList.remove(
                        "text-gray-600",
                        "dark:text-gray-400",
                        "hover:text-gray-900",
                        "dark:hover:text-gray-100",
                    );
                    btn.classList.add(
                        "bg-white",
                        "dark:bg-gray-600",
                        "text-primary-600",
                        "dark:text-primary-400",
                        "shadow-sm",
                    );

                    // 切换内容显示
                    commandContents.forEach((content) => {
                        content.classList.add("hidden");
                    });

                    const targetContent = document.getElementById(
                        `command-${tabName}`,
                    );
                    if (targetContent) {
                        targetContent.classList.remove("hidden");
                    }
                });
            });

            // 复制功能
            const commands = {
                curl: "curl -fsSL https://chezmoi.keveon.io/install.sh | bash",
                wget: "wget -qO- https://chezmoi.keveon.io/install.sh | bash",
                "chezmoi apply": "chezmoi apply",
                "chezmoi status": "chezmoi status",
                "chezmoi apply --dry-run": "chezmoi apply --dry-run",
                "chezmoi update": "chezmoi update",
                "chezmoi archive --output=backup.tar.gz":
                    "chezmoi archive --output=backup.tar.gz",
                "mise install": "mise install",
                "mise ls-remote node": "mise ls-remote node",
                "mise exec node@18 -- node --version":
                    "mise exec node@18 -- node --version",
                "mise tasks": "mise tasks",
                "mise run go:setup": "mise run go:setup",
                "mise run rust:setup": "mise run rust:setup",
                "mise use node@18": "mise use node@18",
                "mise set EDITOR=nvim": "mise set EDITOR=nvim",
                "mise doctor": "mise doctor",
                "mise run dotfiles:sync": "mise run dotfiles:sync",
                "zimfw update": "zimfw update",
                "mise up": "mise up",
            };

            document.querySelectorAll(".copy-btn").forEach((btn) => {
                btn.addEventListener("click", async (e) => {
                    const command = e.target.dataset.command;
                    const text = commands[command];

                    if (!text) return;

                    try {
                        await navigator.clipboard.writeText(text);
                        const originalText = e.target.textContent;
                        e.target.textContent = "✅ 已复制";
                        e.target.classList.add(
                            "bg-green-600",
                            "hover:bg-green-700",
                        );
                        e.target.classList.remove(
                            "bg-primary-600",
                            "hover:bg-primary-700",
                            "bg-gray-600",
                            "hover:bg-gray-700",
                        );

                        setTimeout(() => {
                            e.target.textContent = originalText;
                            e.target.classList.remove(
                                "bg-green-600",
                                "hover:bg-green-700",
                            );
                            if (command === "curl" || command === "wget") {
                                e.target.classList.add(
                                    "bg-primary-600",
                                    "hover:bg-primary-700",
                                );
                            } else {
                                e.target.classList.add(
                                    "bg-gray-600",
                                    "hover:bg-gray-700",
                                );
                            }
                        }, 2000);
                    } catch (err) {
                        console.error("复制失败:", err);
                    }
                });
            });
        });
    </script>
</Layout>
